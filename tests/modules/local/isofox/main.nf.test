nextflow_process {

    name "Test Process ISOFOX"
    script "modules/local/isofox/main.nf"
    process "ISOFOX"

    test("Should run without failures") {

        when {
            params {
                test_sample_data = 'https://raw.githubusercontent.com/nf-core/test-datasets/oncoanalyser/sample_data/simulated_reads/wgts/markdups_bam/'
            }
            process {
                """
                // define inputs of the process here. Example:
                // input[0] = file("test-file.txt")

                input[0] = [
                    [id: 'test',
                    tumor_dna_id: 'tumor_dna_test',
                    normal_dna_id: 'normal_dna_test',
                    tumor_rna_id: 'tumor_rna_test',
                    normal_rna_id: 'normal_rna_test'
                    ],
                
                    file(params.test_sample_data +  'subject_a.tumor.dna.bwa-mem2_2.2.1.markdups.bam', checkIfExists: true),
                    file(params.test_sample_data +  'subject_a.normal.dna.bwa-mem2_2.2.1.markdups.bam', checkIfExists: true),
                    file(params.test_sample_data +  'subject_a.tumor.dna.bwa-mem2_2.2.1.markdups.bam.bai', checkIfExists: true),
                    file(params.test_sample_data +  'subject_a.normal.dna.bwa-mem2_2.2.1.markdups.bam.bai', checkIfExists: true),
                
                ]

                """
            }
        }

        then {
            assert process.success
            assert snapshot(process.out).match()
        }

    }

}
